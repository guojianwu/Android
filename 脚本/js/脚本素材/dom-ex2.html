<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title></title>
    <script type="text/javascript" language="javascript">
        /*
        需求1：
        为employeetable的所有a节点添加onclick响应函数
        1、弹出确认对话框：确定要删除XX的信息吗？  xx为a节点所在的td虽在的tr的第一个子节点的文本值
        2、若点击确认，则删除a节点所在的行
        注意：
        a节点是一个超级链接，可以在其onlick事件中通过返回false，来取消默认行为

        需求2：
            为addEmptyButton  添加onclick响应函数
         1、获取 #name  #email  #salary的文本框的值
         2、利用第一步获取的文本值创建3个td节点，一个tr节点，
         并把以上的3个td节点位于在tr节点的子节点
         <tr>
         <td>zhangsan</td>
         <td>zhangsan@qq.com</td>
         <td>9000</td>
         </tr>
         3、再创建一个td节点
         <td><a href="deleteEmp?id=xxx">Delete</a>
         4、把第三步创建的td节点 添加为tr节点的子节点
         */

        window.onload= function () {
            //添加节点的删除按钮  也起作用 我们将删除函数重构
            function removeTr(aNode)
            {
                var trNode=aNode.parentNode.parentNode;
                var textContent =trNode.getElementsByTagName("td")[0].firstChild.nodeValue;
                //  var textContent =trNode.firstChild.firstChild.nodeValue;

                var flag=confirm("确定要删除"+textContent+"的信息吗？");
                //当flag返回的值是true  表明确定删除
                if(flag){
                    //注意：一般删除一个节点   需要通过父节点的删除子节点方法来删除
                    trNode.parentNode.removeChild(trNode);
                }
                return false;
            }

            var aNodes=document.getElementById("employeetable").getElementsByTagName("a");
            for(var i=0;i<aNodes.length;i++){
                aNodes[i].onclick= function () {
//                    //找到删除的行  a---父节点td---父节点tr
//                    //this代表当前的a节点
//                    var trNode=this.parentNode.parentNode;
//                    var textContent =trNode.getElementsByTagName("td")[0].firstChild.nodeValue;
//                  //  var textContent =trNode.firstChild.firstChild.nodeValue;
//
//                    var flag=confirm("确定要删除"+textContent+"的信息吗？");
//                    //当flag返回的值是true  表明确定删除
//                    if(flag){
//                        //注意：一般删除一个节点   需要通过父节点的删除子节点方法来删除
//                        trNode.parentNode.removeChild(trNode);
//                    }
                    removeTr(this);
                   return false;
                }
            }

            // 添加节点代码
                document.getElementById("addEmptyButton").onclick= function () {
                    //alert(1);
                    //获取文本值
                    var nameVal =document.getElementById("name").value;
                    var emailVal =document.getElementById("email").value;
                    var salaryVal =document.getElementById("salary").value;
                    //创建3个td节点
                    var nameTd =document.createElement("td");
                    nameTd.appendChild(document.createTextNode(nameVal));
                    var emailTd =document.createElement("td");
                    emailTd.appendChild(document.createTextNode(emailVal));
                    var salaryTd =document.createElement("td");
                    salaryTd.appendChild(document.createTextNode(salaryVal));
                    //创建一个tr节点
                    var tr=document.createElement("tr");
                    //将三个td节点添加到tr节点下
                    tr.appendChild(nameTd);
                    tr.appendChild(emailTd);
                    tr.appendChild(salaryTd);

                    //3、再创建一个td
                   // <td><a href="deleteEmp?id=xxx">Delete</a></td>
                    var aNode =document.createElement("a");
                    aNode.href="deleteEmp?id=xxx";
                    aNode.appendChild(document.createTextNode("Delete"));
                    var aTd =document.createElement("td");
                    aTd.appendChild(aNode);
                    tr.appendChild(aTd);

                    //让添加节点的删除按钮也好用
                    aNode.onclick= function () {
                        //删除节点的函数
                        removeTr(this);
                        return false;
                    }

                    //将tr节点   添加到table里面
                    document.getElementById("employeetable").appendChild(tr);
                }


        }
    </script>
</head>
<body>
<center>
    <br><br>  添加新员工  <br><br>
    name:<input type="text" name="name" id="name"/>&nbsp;&nbsp;
    email:<input type="text" name="email" id="email"/>&nbsp;&nbsp;
    salary:<input type="text" name="salary" id="salary"/>&nbsp;&nbsp;
    <br><br>
    <button id="addEmptyButton">Submit</button>

    <br><br>
     <table id="employeetable" border="1" cellpadding="5" cellspacing="0">
         <tr>
             <th>Name</th>
             <th>Email</th>
             <th>Salary</th>
             <th>&nbsp;</th>
         </tr>
         <tr>
             <td>Tom</td>
             <td>tom@tom.com</td>
             <td>5000</td>
             <td><a href="deleteEmp?id=001">Delete</a>
             </td>
         </tr>
          <tr>
              <td>Jerry</td>
              <td>Jerry@sohu.com</td>
              <td>8000</td>
              <td><a href="deleteEmp?id=002">Delete</a></td>
          </tr>
         <tr>
             <td>Bob</td>
             <td>bob@tom.com</td>
             <td>10000</td>
             <td><a href="deleteEmp?id=003">Delete</a></td>
         </tr>
     </table>
    </center>
</body>
</html>